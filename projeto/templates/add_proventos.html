{% extends 'base.html' %}

{% block conteudo %}

    <form method="POST">
        <!-- Selecionar um provento já existente -->
        <label for="provento">Escolher Provento Existente:</label>
        <select name="provento" id="provento" onchange="atualizarCampos()">
            <option value="">Selecione um provento</option>
            {% for provento in proventos_existentes %}
                <option value="{{ provento.id_provento }}" data-desc="{{ provento.desc_provento }}" data-valor="{{ provento.valor_provento }}">
                    {{ provento.desc_provento }}
                </option>
            {% endfor %}
        </select>
        
        <br><br>
        
        <!-- Caso o usuário queira adicionar um novo provento -->
        <label for="desc_provento">Descrição do Novo Provento:</label>
        <input type="text" name="desc_provento" id="descricao" required>
        
        <label for="valor_provento">Valor do Novo Provento:</label>
        <input type="number" step="0.01" name="valor_provento" id="valor" required>
        
        <br><br>
        
        <button type="submit">Adicionar Provento</button>
    </form>


    <!-- Usando JS para se caso o usuário selecionar algum provento, as informações já aparecerem nos campos -->
    <script>
        function atualizarCampos() {
            var select = document.getElementById('provento');
            var descricaoField = document.getElementById('descricao');
            var valorField = document.getElementById('valor');
            
            var selectedOption = select.options[select.selectedIndex];
            
            // Verifica se uma opção foi selecionada
            if (selectedOption.value) {
                // Preenche os campos de descrição e valor com os dados da opção selecionada
                descricaoField.value = selectedOption.getAttribute('data-desc');
                valorField.value = selectedOption.getAttribute('data-valor');
            } else {
                // Limpa os campos caso nenhuma opção seja selecionada
                descricaoField.value = '';
                valorField.value = '';
            }
        }
    </script>

{% endblock %}